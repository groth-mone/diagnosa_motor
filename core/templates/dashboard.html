{% extends 'base_admin.html' %}

{% block title %}Dashboard Admin{% endblock %}

{% block page_title %}Dashboard Admin{% endblock %}

{% block page_actions %}
<a href="#" class="btn btn-sm btn-outline-primary me-2" data-bs-toggle="modal" data-bs-target="#systemStatusModal">
  <i class="fas fa-server me-1"></i> System Status
</a>
<button class="btn btn-sm btn-outline-secondary" id="refreshStats">
  <i class="fas fa-sync-alt me-1"></i> Refresh Data
</button>
{% endblock %}

{% block content %}
{% csrf_token %}

<!-- Stats Overview Cards -->
<div class="row mb-4">
  <div class="col-md-3">
    <div class="card border-start border-4 border-primary h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <h6 class="text-muted fw-normal mt-0">Total Gejala</h6>
            <h3 class="mt-3 mb-3">{{ gejala_count }}</h3>
          </div>
          <div class="avatar-sm rounded-circle bg-primary bg-opacity-10 text-primary">
            <i class="fas fa-stethoscope fa-2x p-3"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="card border-start border-4 border-success h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <h6 class="text-muted fw-normal mt-0">Total Diagnosa</h6>
            <h3 class="mt-3 mb-3">{{ diagnosa_count }}</h3>
          </div>
          <div class="avatar-sm rounded-circle bg-success bg-opacity-10 text-success">
            <i class="fas fa-clipboard-check fa-2x p-3"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="card border-start border-4 border-warning h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <h6 class="text-muted fw-normal mt-0">Total Rule</h6>
            <h3 class="mt-3 mb-3">{{ rule_count }}</h3>
          </div>
          <div class="avatar-sm rounded-circle bg-warning bg-opacity-10 text-warning">
            <i class="fas fa-sitemap fa-2x p-3"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="card border-start border-4 border-info h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-start">
          <div>
            <h6 class="text-muted fw-normal mt-0">Total User</h6>
            <h3 class="mt-3 mb-3">{{ user_count }}</h3>
          </div>
          <div class="avatar-sm rounded-circle bg-info bg-opacity-10 text-info">
            <i class="fas fa-users fa-2x p-3"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Quick Access -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">Akses Cepat</h5>
      </div>
      <div class="card-body">
        <div class="row g-4 text-center">
          <div class="col-md-3 col-6">
            <a href="{% url 'gejala_list' %}" class="text-decoration-none">
              <div class="p-3 rounded bg-light hover-shadow">
                <div class="display-6 text-primary mb-2">
                  <i class="fas fa-stethoscope"></i>
                </div>
                <h5 class="mb-1">Kelola Gejala</h5>
                <p class="text-muted small mb-0">Manage gejala dan atribut</p>
              </div>
            </a>
          </div>
          
          <div class="col-md-3 col-6">
            <a href="{% url 'diagnosa_list' %}" class="text-decoration-none">
              <div class="p-3 rounded bg-light hover-shadow">
                <div class="display-6 text-success mb-2">
                  <i class="fas fa-clipboard-check"></i>
                </div>
                <h5 class="mb-1">Kelola Diagnosa</h5>
                <p class="text-muted small mb-0">Manage diagnosa penyakit</p>
              </div>
            </a>
          </div>
          
          <div class="col-md-3 col-6">
            <a href="{% url 'rule_list' %}" class="text-decoration-none">
              <div class="p-3 rounded bg-light hover-shadow">
                <div class="display-6 text-warning mb-2">
                  <i class="fas fa-sitemap"></i>
                </div>
                <h5 class="mb-1">Kelola Rule</h5>
                <p class="text-muted small mb-0">Manage rule diagnosa</p>
              </div>
            </a>
          </div>
          
          <div class="col-md-3 col-6">
            <a href="{% url 'user_list' %}" class="text-decoration-none">
              <div class="p-3 rounded bg-light hover-shadow">
                <div class="display-6 text-info mb-2">
                  <i class="fas fa-users"></i>
                </div>
                <h5 class="mb-1">Kelola User</h5>
                <p class="text-muted small mb-0">Manage pengguna sistem</p>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- System Status Modal -->
<div class="modal fade" id="systemStatusModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">System Status Report</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Download Full Report</button>
      </div>
    </div>
  </div>
</div>

<style>
.avatar-sm {
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.hover-shadow {
  transition: all 0.3s ease;
}

.hover-shadow:hover {
  transform: translateY(-5px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.bg-primary-subtle {
  background-color: rgba(13, 110, 253, 0.1);
}

.bg-success-subtle {
  background-color: rgba(25, 135, 84, 0.1);
}

.bg-warning-subtle {
  background-color: rgba(255, 193, 7, 0.1);
}

.bg-info-subtle {
  background-color: rgba(13, 202, 240, 0.1);
}
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Refresh stats button animation
    document.getElementById('refreshStats').addEventListener('click', function() {
      const icon = this.querySelector('i');
      icon.classList.add('fa-spin');
      setTimeout(() => {
        icon.classList.remove('fa-spin');
      }, 1000);
    });
    
    // System status refresh animation
    document.getElementById('refreshSystemStatus').addEventListener('click', function() {
      this.disabled = true;
      this.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Refreshing...';
      setTimeout(() => {
        this.disabled = false;
        this.innerHTML = 'Refresh';
      }, 1000);
    });
  });
</script>
{% endblock %}